node.warn(msg.payload);
// msg.payload.messages[0].contents.body.contents[3].contents[0].contents[1].text = "1220700050221";

if (msg.payload.messages) {
    node.warn(msg.payload.messages);
    msg.payload.messages.forEach((messages) => {
        node.error(messages.type);
        if (messages.type == "video") {
            trans_video(messages);
        } else if (messages.type == "flex") {
            const check_catalogue =
                messages.contents &&
                messages.contents.contents &&
                messages.contents.contents[0] &&
                messages.contents.contents[0].body &&
                messages.contents.contents[0].body.contents &&
                messages.contents.contents[0].body.contents[1] &&
                messages.contents.contents[0].body.contents[1].text ?
                messages.contents.contents[0].body.contents[1].text.split(
                    "|"
                ) :
                "";
            if (
                check_catalogue[0] &&
                check_catalogue[0] === "claim and view policy"
            ) {
                node.warn(1);
                claim_and_view_policy_flex(messages);
            } else if (
                check_catalogue[0] &&
                check_catalogue[0] === "renewal claim and view policy"
            ) {
                node.warn(2);
                renewal_claim_and_view_policy_flex(messages);
            } else if (
                check_catalogue[0] &&
                check_catalogue[0] === "renewal and view policy"
            ) {
                node.warn(3);
                renewal_and_view_policy_flex(messages);
            } else if (
                check_catalogue[0] &&
                check_catalogue[0] === "view policy"
            ) {
                node.warn(4);
                view_policy_flex(messages);
            }
        } else if (messages.type == "text") {
            const getData = messages.text.split("|");
            if (getData[0] === "Products") {
                trans_text_to_flex(messages);
            }
        }
    });
    msg.backup_payload = JSON.parse(JSON.stringify(msg.payload));
} else {
    node.error("Have no message");
}
return msg;

function claim_and_view_policy_flex(message) {
    let newDataContent = new Array();
    let data = message.contents.contents;
    let type = data[0].body.contents[0].text || "";
    let pol_type = (data[0].body.contents[1].text.split("|")[1] || "").split(
        ":"
    );
    let pol_id = (data[0].body.contents[1].text.split("|")[2] || "").split(":");
    let pol_first_name = (
        data[0].body.contents[1].text.split("|")[3] || ""
    ).split(":");
    let pol_last_name = (
        data[0].body.contents[1].text.split("|")[4] || ""
    ).split(":");
    let pol_valuntary_plateno = (
        data[0].body.contents[1].text.split("|")[5] || ""
    ).split(":");
    let pol_subtype = (data[0].body.contents[1].text.split("|")[6] || "").split(
        ":"
    );
    let pol_start_date = (
        data[0].body.contents[1].text.split("|")[7] || ""
    ).split(":");
    let pol_end_date = (
        data[0].body.contents[1].text.split("|")[8] || ""
    ).split(":");
    let pol_status_active = (
        data[0].body.contents[1].text.split("|")[9] || ""
    ).split(":");
    let btn = data[0].footer.contents[0].action.label;
    let url = data[0].footer.contents[0].action.uri;

    if (pol_type === "1") {
        let bodyContent = {
            type: "bubble",
            size: "mega",
            hero: {
                type: "box",
                layout: "vertical",
                contents: [{
                        type: "image",
                        url: "https://i.imgur.com/i8ClcWx.png",
                        size: "240px",
                        aspectRatio: "10:4",
                    },
                    {
                        type: "separator",
                        color: "#FCAF17",
                    },
                ],
                height: "100px",
            },
            body: {
                type: "box",
                layout: "vertical",
                spacing: "lg",
                action: {
                    type: "uri",
                    uri: "https://linecorp.com",
                },
                contents: [{
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "ชั้น 1 ซ่อมห้าง",
                            size: "14px",
                            color: "#616161",
                            weight: "bold",
                            style: "normal",
                        }, ],
                        offsetStart: "md",
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        spacing: "md",
                        contents: [{
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "เลขกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_id[1]}`,
                                            flex: 0,
                                            size: "12px",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ผู้เอาประกันภัย",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_first_name[1]} ${pol_last_name[1]}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ทะเบียนรถ",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ทะเบียนรถ",
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่เริ่มคุ้มครอง",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_start_date[1]}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่หมดอายุ",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_end_date[1]}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "สถานะกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_status_active[1]}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                        ],
                        height: "150px",
                        offsetStart: "md",
                    },
                ],
                paddingTop: "xl",
            },
            footer: {
                type: "box",
                layout: "vertical",
                spacing: "sm",
                contents: [{
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "แจ้งเคลม",
                            size: "14px",
                            weight: "regular",
                            color: "#FFFFFF",
                            margin: "none",
                        }, ],
                        height: "36px",
                        width: "240px",
                        backgroundColor: "#0033A2",
                        cornerRadius: "8px",
                        alignItems: "center",
                        justifyContent: "center",
                        margin: "md",
                        offsetStart: "xxl",
                        action: {
                            type: "uri",
                            label: "action",
                            uri: "tel://021298888",
                        },
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "ดูกรมธรรม์",
                            size: "14px",
                            weight: "regular",
                            color: "#FFFFFF",
                            margin: "none",
                        }, ],
                        height: "36px",
                        width: "240px",
                        backgroundColor: "#0033A2",
                        cornerRadius: "8px",
                        alignItems: "center",
                        justifyContent: "center",
                        margin: "lg",
                        offsetStart: "xxl",
                        action: {
                            type: "uri",
                            label: "action",
                            uri: "http://linecorp.com/",
                        },
                    },
                ],
                flex: 0,
                height: "130px",
            },
        };
        newDataContent.push(JSON.parse(JSON.stringify(bodyContent)));
    } else {
        let lastContent = {
            type: "bubble",
            size: "mega",
            hero: {
                type: "box",
                layout: "vertical",
                contents: [{
                        type: "image",
                        url: "https://i.imgur.com/a1SCtg0.png",
                        size: "240px",
                        aspectRatio: "10:4",
                    },
                    {
                        type: "separator",
                        color: "#FCAF17",
                    },
                ],
                height: "100px",
            },
            body: {
                type: "box",
                layout: "vertical",
                spacing: "lg",
                action: {
                    type: "uri",
                    uri: "https://linecorp.com",
                },
                contents: [{
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "อุ่นใจรักษ์",
                            size: "14px",
                            color: "#616161",
                            weight: "bold",
                            style: "normal",
                        }, ],
                        offsetStart: "md",
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        spacing: "md",
                        contents: [{
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "เลขกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_id[1]}`,
                                            flex: 0,
                                            size: "12px",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ผู้เอาประกันภัย",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_first_name[1]} ${pol_last_name[1]}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "แผน",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "1",
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่เริ่มคุ้มครอง",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_start_date[1]}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่หมดอายุ",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_end_date[1]}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "สถานะกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_status_active[1]}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                        ],
                        height: "150px",
                        offsetStart: "md",
                    },
                ],
                paddingTop: "xl",
            },
            footer: {
                type: "box",
                layout: "vertical",
                spacing: "sm",
                contents: [{
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "แจ้งเคลม",
                            size: "14px",
                            weight: "regular",
                            color: "#FFFFFF",
                            margin: "none",
                        }, ],
                        height: "36px",
                        width: "240px",
                        backgroundColor: "#0033A2",
                        cornerRadius: "8px",
                        alignItems: "center",
                        justifyContent: "center",
                        margin: "md",
                        offsetStart: "xxl",
                        action: {
                            type: "uri",
                            label: "action",
                            uri: "http://linecorp.com/",
                        },
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "ดูกรมธรรม์",
                            size: "14px",
                            weight: "regular",
                            color: "#FFFFFF",
                            margin: "none",
                        }, ],
                        height: "36px",
                        width: "240px",
                        backgroundColor: "#0033A2",
                        cornerRadius: "8px",
                        alignItems: "center",
                        justifyContent: "center",
                        margin: "lg",
                        offsetStart: "xxl",
                        action: {
                            type: "uri",
                            label: "action",
                            uri: "http://linecorp.com/",
                        },
                    },
                ],
                flex: 0,
                height: "130px",
            },
        };
        newDataContent.push(JSON.parse(JSON.stringify(lastContent)));
    }
    message.contents.contents = newDataContent;
}

function renewal_claim_and_view_policy_flex(message) {
    let data = message.contents.contents;
    let type = data[0].body.contents[0].text || "";
    let pol_type = (data[0].body.contents[1].text.split("|")[1] || "").split(
        ":"
    );
    let pol_id = (data[0].body.contents[1].text.split("|")[2] || "").split(":");
    let pol_first_name = (
        data[0].body.contents[1].text.split("|")[3] || ""
    ).split(":");
    let pol_last_name = (
        data[0].body.contents[1].text.split("|")[4] || ""
    ).split(":");
    let pol_valuntary_plateno = (
        data[0].body.contents[1].text.split("|")[5] || ""
    ).split(":");
    let pol_subtype = (data[0].body.contents[1].text.split("|")[6] || "").split(
        ":"
    );
    let pol_start_date = (
        data[0].body.contents[1].text.split("|")[7] || ""
    ).split(":");
    let pol_end_date = (
        data[0].body.contents[1].text.split("|")[8] || ""
    ).split(":");
    let pol_status_active = (
        data[0].body.contents[1].text.split("|")[9] || ""
    ).split(":");
    let btn = data[0].footer.contents[0].action.label;
    let url = data[0].footer.contents[0].action.uri;

    if (pol_type === "1") {
        var body = {
            type: "bubble",
            size: "mega",
            hero: {
                type: "box",
                layout: "vertical",
                contents: [{
                        type: "image",
                        url: "https://i.imgur.com/i8ClcWx.png",
                        size: "240px",
                        aspectRatio: "10:4",
                    },
                    {
                        type: "separator",
                        color: "#FCAF17",
                    },
                ],
                height: "100px",
            },
            body: {
                type: "box",
                layout: "vertical",
                spacing: "lg",
                action: {
                    type: "uri",
                    uri: "https://linecorp.com",
                },
                contents: [{
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "ชั้น 1 ซ่อมห้าง",
                            size: "14px",
                            color: "#616161",
                            weight: "bold",
                            style: "normal",
                        }, ],
                        offsetStart: "md",
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        spacing: "md",
                        contents: [{
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "เลขกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_id}`,
                                            flex: 0,
                                            size: "12px",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ผู้เอาประกันภัย",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_first_name} ${pol_last_name}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ทะเบียนรถ",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วย 1557 ชบ",
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่เริ่มคุ้มครอง",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_start_date}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่หมดอายุ",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_end_date}*`,
                                            size: "12px",
                                            align: "start",
                                            color: "#F72C40",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "สถานะกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "คุ้มครอง",
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                        ],
                        height: "150px",
                        offsetStart: "md",
                    },
                ],
                paddingTop: "xl",
            },
            footer: {
                type: "box",
                layout: "vertical",
                spacing: "sm",
                contents: [{
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "ต่ออายุกรมธรรม์",
                            size: "14px",
                            weight: "regular",
                            color: "#FFFFFF",
                            margin: "none",
                        }, ],
                        height: "36px",
                        width: "240px",
                        backgroundColor: "#F72C40",
                        cornerRadius: "8px",
                        alignItems: "center",
                        justifyContent: "center",
                        margin: "md",
                        offsetStart: "xxl",
                        action: {
                            type: "uri",
                            label: "action",
                            uri: "http://linecorp.com/",
                        },
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "แจ้งเคลม",
                            size: "14px",
                            weight: "regular",
                            color: "#FFFFFF",
                            margin: "none",
                        }, ],
                        height: "36px",
                        width: "240px",
                        backgroundColor: "#0033A2",
                        cornerRadius: "8px",
                        alignItems: "center",
                        justifyContent: "center",
                        margin: "lg",
                        offsetStart: "xxl",
                        action: {
                            type: "uri",
                            label: "action",
                            uri: "tel://021298888",
                        },
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "ดูกรมธรรม์",
                            size: "14px",
                            weight: "regular",
                            color: "#FFFFFF",
                            margin: "none",
                        }, ],
                        height: "36px",
                        width: "240px",
                        backgroundColor: "#0033A2",
                        cornerRadius: "8px",
                        alignItems: "center",
                        justifyContent: "center",
                        margin: "lg",
                        offsetStart: "xxl",
                        action: {
                            type: "uri",
                            label: "action",
                            uri: "http://linecorp.com/",
                        },
                    },
                ],
                flex: 0,
                height: "180px",
            },
        };
    } else {
        var body = {
            type: "bubble",
            size: "mega",
            hero: {
                type: "box",
                layout: "vertical",
                contents: [{
                        type: "image",
                        url: "https://i.imgur.com/a1SCtg0.png",
                        size: "240px",
                        aspectRatio: "10:4",
                    },
                    {
                        type: "separator",
                        color: "#FCAF17",
                    },
                ],
                height: "100px",
            },
            body: {
                type: "box",
                layout: "vertical",
                spacing: "lg",
                action: {
                    type: "uri",
                    uri: "https://linecorp.com",
                },
                contents: [{
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "อุ่นใจรักษ์",
                            size: "14px",
                            color: "#616161",
                            weight: "bold",
                            style: "normal",
                        }, ],
                        offsetStart: "md",
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        spacing: "md",
                        contents: [{
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "เลขกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_id}`,
                                            flex: 0,
                                            size: "12px",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ผู้เอาประกันภัย",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_first_name} ${pol_last_name}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "แผน",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "1",
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่เริ่มคุ้มครอง",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_start_date}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่หมดอายุ",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_end_date}*`,
                                            size: "12px",
                                            align: "start",
                                            color: "#F72C40",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "สถานะกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "คุ้มครอง",
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                        ],
                        height: "150px",
                        offsetStart: "md",
                    },
                ],
                paddingTop: "xl",
            },
            footer: {
                type: "box",
                layout: "vertical",
                spacing: "sm",
                contents: [{
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "ต่ออายุกรมธรรม์",
                            size: "14px",
                            weight: "regular",
                            color: "#FFFFFF",
                            margin: "none",
                        }, ],
                        height: "36px",
                        width: "240px",
                        backgroundColor: "#F72C40",
                        cornerRadius: "8px",
                        alignItems: "center",
                        justifyContent: "center",
                        margin: "md",
                        offsetStart: "xxl",
                        action: {
                            type: "uri",
                            label: "action",
                            uri: "http://linecorp.com/",
                        },
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "แจ้งเคลม",
                            size: "14px",
                            weight: "regular",
                            color: "#FFFFFF",
                            margin: "none",
                        }, ],
                        height: "36px",
                        width: "240px",
                        backgroundColor: "#0033A2",
                        cornerRadius: "8px",
                        alignItems: "center",
                        justifyContent: "center",
                        margin: "lg",
                        offsetStart: "xxl",
                        action: {
                            type: "uri",
                            label: "action",
                            uri: "http://linecorp.com/",
                        },
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "ดูกรมธรรม์",
                            size: "14px",
                            weight: "regular",
                            color: "#FFFFFF",
                            margin: "none",
                        }, ],
                        height: "36px",
                        width: "240px",
                        backgroundColor: "#0033A2",
                        cornerRadius: "8px",
                        alignItems: "center",
                        justifyContent: "center",
                        margin: "lg",
                        offsetStart: "xxl",
                        action: {
                            type: "uri",
                            label: "action",
                            uri: "http://linecorp.com/",
                        },
                    },
                ],
                flex: 0,
                height: "180px",
            },
        };
    }
}

function renewal_and_view_policy_flex(message) {
    let data = message.contents.contents;
    let type = data[0].body.contents[0].text || "";
    let pol_type = (data[0].body.contents[1].text.split("|")[1] || "").split(
        ":"
    );
    let pol_id = (data[0].body.contents[1].text.split("|")[2] || "").split(":");
    let pol_first_name = (
        data[0].body.contents[1].text.split("|")[3] || ""
    ).split(":");
    let pol_last_name = (
        data[0].body.contents[1].text.split("|")[4] || ""
    ).split(":");
    let pol_valuntary_plateno = (
        data[0].body.contents[1].text.split("|")[5] || ""
    ).split(":");
    let pol_subtype = (data[0].body.contents[1].text.split("|")[6] || "").split(
        ":"
    );
    let pol_start_date = (
        data[0].body.contents[1].text.split("|")[7] || ""
    ).split(":");
    let pol_end_date = (
        data[0].body.contents[1].text.split("|")[8] || ""
    ).split(":");
    let pol_status_active = (
        data[0].body.contents[1].text.split("|")[9] || ""
    ).split(":");
    let btn = data[0].footer.contents[0].action.label;
    let url = data[0].footer.contents[0].action.uri;

    if (pol_type === "1") {
        let bodyContent = {
            type: "bubble",
            size: "mega",
            hero: {
                type: "box",
                layout: "vertical",
                contents: [{
                        type: "image",
                        url: "https://i.imgur.com/i8ClcWx.png",
                        size: "240px",
                        aspectRatio: "10:4",
                    },
                    {
                        type: "separator",
                        color: "#FCAF17",
                    },
                ],
                height: "100px",
            },
            body: {
                type: "box",
                layout: "vertical",
                spacing: "lg",
                action: {
                    type: "uri",
                    uri: "https://linecorp.com",
                },
                contents: [{
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "ชั้น 1 ซ่อมห้าง",
                            size: "14px",
                            color: "#616161",
                            weight: "bold",
                            style: "normal",
                        }, ],
                        offsetStart: "md",
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        spacing: "md",
                        contents: [{
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "เลขกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_id}`,
                                            flex: 0,
                                            size: "12px",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ผู้เอาประกันภัย",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_first_name} ${pol_last_name}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ทะเบียนรถ",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ทะเบียนรถ",
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่เริ่มคุ้มครอง",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_start_date}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่หมดอายุ",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_end_date}*`,
                                            size: "12px",
                                            align: "start",
                                            color: "#F72C40",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "สถานะกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ไม่คุ้มครอง",
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                        ],
                        height: "150px",
                        offsetStart: "md",
                    },
                ],
                paddingTop: "xl",
            },
            footer: {
                type: "box",
                layout: "vertical",
                spacing: "sm",
                contents: [{
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "ต่ออายุกรมธรรม์",
                            size: "14px",
                            weight: "regular",
                            color: "#FFFFFF",
                            margin: "none",
                        }, ],
                        height: "36px",
                        width: "240px",
                        backgroundColor: "#F72C40",
                        cornerRadius: "8px",
                        alignItems: "center",
                        justifyContent: "center",
                        margin: "md",
                        offsetStart: "xxl",
                        action: {
                            type: "uri",
                            label: "action",
                            uri: "http://linecorp.com/",
                        },
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "ดูกรมธรรม์",
                            size: "14px",
                            weight: "regular",
                            color: "#FFFFFF",
                            margin: "none",
                        }, ],
                        height: "36px",
                        width: "240px",
                        backgroundColor: "#0033A2",
                        cornerRadius: "8px",
                        alignItems: "center",
                        justifyContent: "center",
                        margin: "lg",
                        offsetStart: "xxl",
                        action: {
                            type: "uri",
                            label: "action",
                            uri: "http://linecorp.com/",
                        },
                    },
                ],
                flex: 0,
                height: "130px",
            },
        };
    } else {
        let lastContent = {
            type: "bubble",
            size: "mega",
            hero: {
                type: "box",
                layout: "vertical",
                contents: [{
                        type: "image",
                        url: "https://i.imgur.com/a1SCtg0.png",
                        size: "240px",
                        aspectRatio: "10:4",
                    },
                    {
                        type: "separator",
                        color: "#FCAF17",
                    },
                ],
                height: "100px",
            },
            body: {
                type: "box",
                layout: "vertical",
                spacing: "lg",
                action: {
                    type: "uri",
                    uri: "https://linecorp.com",
                },
                contents: [{
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "อุ่นใจรักษ์",
                            size: "14px",
                            color: "#616161",
                            weight: "bold",
                            style: "normal",
                        }, ],
                        offsetStart: "md",
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        spacing: "md",
                        contents: [{
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "เลขกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_id}`,
                                            flex: 0,
                                            size: "12px",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ผู้เอาประกันภัย",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_first_name} ${pol_last_name}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "แผน",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "1",
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่เริ่มคุ้มครอง",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_start_date}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่หมดอายุ",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_end_date}*`,
                                            size: "12px",
                                            align: "start",
                                            color: "#F72C40",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "สถานะกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ไม่คุ้มครอง",
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                        ],
                        height: "150px",
                        offsetStart: "md",
                    },
                ],
                paddingTop: "xl",
            },
            footer: {
                type: "box",
                layout: "vertical",
                spacing: "sm",
                contents: [{
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "ต่ออายุกรมธรรม์",
                            size: "14px",
                            weight: "regular",
                            color: "#FFFFFF",
                            margin: "none",
                        }, ],
                        height: "36px",
                        width: "240px",
                        backgroundColor: "#F72C40",
                        cornerRadius: "8px",
                        alignItems: "center",
                        justifyContent: "center",
                        margin: "md",
                        offsetStart: "xxl",
                        action: {
                            type: "uri",
                            label: "action",
                            uri: "http://linecorp.com/",
                        },
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "ดูกรมธรรม์",
                            size: "14px",
                            weight: "regular",
                            color: "#FFFFFF",
                            margin: "none",
                        }, ],
                        height: "36px",
                        width: "240px",
                        backgroundColor: "#0033A2",
                        cornerRadius: "8px",
                        alignItems: "center",
                        justifyContent: "center",
                        margin: "lg",
                        offsetStart: "xxl",
                        action: {
                            type: "uri",
                            label: "action",
                            uri: "http://linecorp.com/",
                        },
                    },
                ],
                flex: 0,
                height: "130px",
            },
        };
    }
}

function view_policy_flex(message) {
    let data = message.contents.contents;
    let type = data[0].body.contents[0].text || "";
    let pol_type = (data[0].body.contents[1].text.split("|")[1] || "").split(
        ":"
    );
    let pol_id = (data[0].body.contents[1].text.split("|")[2] || "").split(":");
    let pol_first_name = (
        data[0].body.contents[1].text.split("|")[3] || ""
    ).split(":");
    let pol_last_name = (
        data[0].body.contents[1].text.split("|")[4] || ""
    ).split(":");
    let pol_valuntary_plateno = (
        data[0].body.contents[1].text.split("|")[5] || ""
    ).split(":");
    let pol_subtype = (data[0].body.contents[1].text.split("|")[6] || "").split(
        ":"
    );
    let pol_start_date = (
        data[0].body.contents[1].text.split("|")[7] || ""
    ).split(":");
    let pol_end_date = (
        data[0].body.contents[1].text.split("|")[8] || ""
    ).split(":");
    let pol_status_active = (
        data[0].body.contents[1].text.split("|")[9] || ""
    ).split(":");
    let btn = data[0].footer.contents[0].action.label;
    let url = data[0].footer.contents[0].action.uri;

    //     let newDate = dateTime[0].split("-").reverse().join("/");
    //     let newDateTime = newDate + " " + newTime;
    //     node.warn(newDate);

    //     // let dateTime = purchase_date[1].split("T");
    //     // let date = dateTime[0].split("-");

    //     // let years = Number(date[0]);
    //     // let months = Number(date[1]);
    //     // let days = Number(date[2]);

    //     // formatTHDate = thDate.split(", ");
    //     // let removeMinutes = formatTHDate[1].split(":");
    //     // let newTime = removeMinutes[0] + ":" + removeMinutes[1];
    //     // let newDateTime = formatTHDate[0] + " " + newTime;

    //     let imgBackground = data[0].hero.url; //image order status

    //     msg.payload.messages[0].type = "flex";
    //     let altText = "";
    //     let _backgroundColor;
    //     order_status[1] === "pending" || order_status[1] === "approved" ? (_backgroundColor = "#ECFFFA") : (_backgroundColor = "#FFF2F2");

    if (pol_type === "1") {
        var body = {
            type: "bubble",
            size: "mega",
            hero: {
                type: "box",
                layout: "vertical",
                contents: [{
                        type: "image",
                        url: "https://i.imgur.com/i8ClcWx.png",
                        size: "240px",
                        aspectRatio: "10:4",
                    },
                    {
                        type: "separator",
                        color: "#FCAF17",
                    },
                ],
                height: "100px",
            },
            body: {
                type: "box",
                layout: "vertical",
                spacing: "lg",
                action: {
                    type: "uri",
                    uri: "https://linecorp.com",
                },
                contents: [{
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "อุ่นใจรักษ์",
                            size: "14px",
                            color: "#616161",
                            weight: "bold",
                            style: "normal",
                        }, ],
                        offsetStart: "md",
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        spacing: "md",
                        contents: [{
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "เลขกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_id}`,
                                            flex: 0,
                                            size: "12px",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ผู้เอาประกันภัย",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_first_name} ${pol_last_name}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ทะเบียนรถ",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วย 1557 ชบ",
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่เริ่มคุ้มครอง",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_start_date}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่หมดอายุ",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_end_date}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "สถานะกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "คุ้มครอง",
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                        ],
                        height: "150px",
                        offsetStart: "md",
                    },
                ],
                paddingTop: "xl",
            },
            footer: {
                type: "box",
                layout: "vertical",
                spacing: "sm",
                contents: [{
                    type: "box",
                    layout: "vertical",
                    contents: [{
                        type: "text",
                        text: "ดูกรมธรรม์",
                        size: "14px",
                        weight: "regular",
                        color: "#FFFFFF",
                        margin: "none",
                    }, ],
                    height: "36px",
                    width: "240px",
                    backgroundColor: "#0033A2",
                    cornerRadius: "8px",
                    alignItems: "center",
                    justifyContent: "center",
                    margin: "md",
                    offsetStart: "xxl",
                    action: {
                        type: "uri",
                        label: "action",
                        uri: "http://linecorp.com/",
                    },
                }, ],
                flex: 0,
                height: "80px",
            },
        };
    } else {
        var body = {
            type: "bubble",
            size: "mega",
            hero: {
                type: "box",
                layout: "vertical",
                contents: [{
                        type: "image",
                        url: "https://i.imgur.com/a1SCtg0.png",
                        size: "240px",
                        aspectRatio: "10:4",
                    },
                    {
                        type: "separator",
                        color: "#FCAF17",
                    },
                ],
                height: "100px",
            },
            body: {
                type: "box",
                layout: "vertical",
                spacing: "lg",
                action: {
                    type: "uri",
                    uri: "https://linecorp.com",
                },
                contents: [{
                        type: "box",
                        layout: "vertical",
                        contents: [{
                            type: "text",
                            text: "อุ่นใจรักษ์",
                            size: "14px",
                            color: "#616161",
                            weight: "bold",
                            style: "normal",
                        }, ],
                        offsetStart: "md",
                    },
                    {
                        type: "box",
                        layout: "vertical",
                        spacing: "md",
                        contents: [{
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "เลขกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_id}`,
                                            flex: 0,
                                            size: "12px",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "ผู้เอาประกันภัย",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_first_name} ${pol_last_name}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "แผน",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "1",
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่เริ่มคุ้มครอง",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_start_date}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "วันที่หมดอายุ",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: `${pol_end_date}`,
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                            {
                                type: "box",
                                layout: "horizontal",
                                contents: [{
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "สถานะกรมธรรม์",
                                            flex: 0,
                                            size: "12px",
                                            color: "#9E9E9E",
                                            style: "normal",
                                        }, ],
                                    },
                                    {
                                        type: "box",
                                        layout: "vertical",
                                        contents: [{
                                            type: "text",
                                            text: "คุ้มครอง",
                                            size: "12px",
                                            align: "start",
                                            color: "#0033A2",
                                            style: "normal",
                                        }, ],
                                    },
                                ],
                            },
                        ],
                        height: "150px",
                        offsetStart: "md",
                    },
                ],
                paddingTop: "xl",
            },
            footer: {
                type: "box",
                layout: "vertical",
                spacing: "sm",
                contents: [{
                    type: "box",
                    layout: "vertical",
                    contents: [{
                        type: "text",
                        text: "ดูกรมธรรม์",
                        size: "14px",
                        weight: "regular",
                        color: "#FFFFFF",
                        margin: "none",
                    }, ],
                    height: "36px",
                    width: "240px",
                    backgroundColor: "#0033A2",
                    cornerRadius: "8px",
                    alignItems: "center",
                    justifyContent: "center",
                    margin: "md",
                    offsetStart: "xxl",
                    action: {
                        type: "uri",
                        label: "action",
                        uri: "http://linecorp.com/",
                    },
                }, ],
                flex: 0,
                height: "80px",
            },
        };
    }
}

return msg;